#!/bin/bash
echo "Build SoupTools!"

# Stop on first error
set -e

FLAVOR="$1"
SCRIPTS_DIR=$(dirname "$0")
CODE_DIR=$SCRIPTS_DIR/../../code
TOOLS_DIR=

# Bootstrap
echo soup restore $CODE_DIR/tools/bootstrap
soup restore $CODE_DIR/tools/bootstrap

echo soup build $CODE_DIR/tools/bootstrap -flavor $FLAVOR
soup build $CODE_DIR/tools/bootstrap -flavor $FLAVOR

# Copy
echo soup restore $CODE_DIR/tools/copy
soup restore $CODE_DIR/tools/copy

echo soup build $CODE_DIR/tools/copy -flavor $FLAVOR
soup build $CODE_DIR/tools/copy -flavor $FLAVOR

# Mkdir
echo soup restore $CODE_DIR/tools/mkdir
soup restore $CODE_DIR/tools/mkdir

echo soup build $CODE_DIR/tools/mkdir -flavor $FLAVOR
soup build $CODE_DIR/tools/mkdir -flavor $FLAVOR

# Parse Modules
echo soup restore $CODE_DIR/tools/parse-modules
soup restore $CODE_DIR/tools/parse-modules

echo soup build $CODE_DIR/tools/parse-modules -flavor $FLAVOR
soup build $CODE_DIR/tools/parse-modules -flavor $FLAVOR

# Print Graph
echo soup restore $CODE_DIR/tools/print-graph
soup restore $CODE_DIR/tools/print-graph

echo soup build $CODE_DIR/tools/print-graph -flavor $FLAVOR
soup build $CODE_DIR/tools/print-graph -flavor $FLAVOR

# Print Results
echo soup restore $CODE_DIR/tools/print-results
soup restore $CODE_DIR/tools/print-results

echo soup build $CODE_DIR/tools/print-results -flavor $FLAVOR
soup build $CODE_DIR/tools/print-results -flavor $FLAVOR

# Print ValueTable
echo soup restore $CODE_DIR/tools/print-valuetable
soup restore $CODE_DIR/tools/print-valuetable

echo soup build $CODE_DIR/tools/print-valuetable -flavor $FLAVOR
soup build $CODE_DIR/tools/print-valuetable -flavor $FLAVOR